.PHONY: up down restart logs ps shell shell-sotano shell-colador clean

up:
	@docker compose down -v --remove-orphans >/dev/null 2>&1 || true
	@docker network rm cve24061_internal_net >/dev/null 2>&1 || true
	docker compose up --build -d
	@printf "Listo. Entra al bastiÃ³n con: \033[1;35mmake shell\033[0m\n"

down:
	docker compose down

restart: down up

logs:
	docker compose logs -f --tail=200

ps:
	docker compose ps

shell: shell-sotano

shell-sotano:
	docker exec -it sotano bash -l

shell-colador:
	docker exec -it colador bash -l

clean: down
	@docker network rm cve24061_internal_net >/dev/null 2>&1 || true
